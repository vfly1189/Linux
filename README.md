# Linux 설계1
1. 개요
- ssu_score 실행 프로그램은 <ANS_DIR>에 존재하는 정답 파일과 <STD_DIR>에 존재하는 각 학생들의 답안파일을 비교하여 자동으로 채점해주는 프로그램이다.
- 빈칸문제의 경우 연산자의 의해 다수의 정답이 존재하는 경우 모두 정답처리 하는 기능이 있다.
- 프로그램문제의 경우 컴파일 에러 발생시 0점 , warning시 -0.5점을 진행한다.
- -m 옵션,  -i 옵션,  -h 옵션,  -e 옵션,  -t 옵션을 이용하여 특정 문제에 대해 lpthread와 같은 옵션을 설정하고, 각 학생 별로 어떤 문제가 틀렸고 어떤 에러나 Warning을 냈는지 알 수 있는 기능들이 존해하는 프로그램이다.
- m 옵션 : 특정 문제의 배점을 수정 할 수 있다.
- i <IDS> 옵션 : 최대 5개까지 학번을 인자로 주면 각 학생 별로 틀린 문제의 번호를 출력해준다
	- 학생정답파일 디렉토리와 정답파일 디렉토리가 없어도 score.csv파일이 존재하면 사용 	가능하다.
- h 옵션 : 사용법을 출력한다
- t 옵션 : 프로그램 컴파일시 lpthread옵션을 적용하여 채점한다
- e <DIR> 옵션 : DIR에 각 학생별로 컴파일 에러나 Warning정보를 출력한다.

2. 분석
(1) 수정되거나 추가된 부분 ( 코드 부분은 <5. 소스코드 및 주석> 에 추가했습니다.  )
- void do_mOption(char *path);
	- 인자로 score_table.csv파일이 저장된 디렉토리 경로를 인자로 받는다.
	- m옵션이 특정 문제의 점수 배점을 수정하고 이를 score_table.csv에 반영하여 채점한다.
- int check_option(int argc, char** argv); 
- 옵션들의 기호와 기능이 변경됨에 따라 ethmi 기호로 수정하여 각 옵션 별 flag 설정및 데이터 저장
- int do_iOption(char (*ids)[FILELEN]);
	- 인자로 학번을 받아 cIDs배열에 저장하여 cIDs를 인자로 입력받는다.
- score.csv파일이 존재하면 score.csv파일에서 학번을 찾아내 0점 문제의 문제의 이름을출력해준다.
- double compile_program(char *id, char *filename);
- int execute_program(char *id, char *filename);
- int score_blank(char *id, char *filename);
- 위 3개의 함수 모두 정답파일의 경로를 문제번호로 서브 디렉토리가 없는 경로로 바꾸어 프로그램 컴파일, 프로그램 실행, 빈칸 채점을 진행하였음.
- double score_student(int fd, char *id);
- 이전의 옵션의 플래그가 true일 경우에만 점수를 출력하던 방식을 항상 출력하도록 변경

3. 설계 및 구현 
- 상세 설명
	- ssu_score.c
		- 옵션들을 체크하여 플래그를 설정해준다.
			- m옵션이 걸려있으면 채점 전에 배점을 수정한다.
		- 점수 배점 테이블(score_table.csv)의 제작, 정렬, 읽어오기 작업 수행
		- 학번 테이블 제작, 정렬 수행
		- 빈칸문제의 경우 blank.c에서 처리한다
			- 토큰화 -> 트리화 시킨 뒤에 트리를 서로 비교한다.
		- 프로그램문제의 경우 컴파일 과정과 실행 과정으로 나뉜다.
		- 컴파일 과정에서 정답파일들과 학생파일을 컴파일 시킨 뒤 에러시 0점 			warning시 개수 당 감점. 
		- 실행 과정에서 옵션이 걸린 문제는 lpthread를 추가해주고 기본적으로 백그라		운드로 실행 시킨다음 실행 결과를 서로 비교하여 채점한다.
	- blank.c
		- 넘겨 받은 문자열을 연산자 별로 토큰화 시킨다.
		- 토큰화 시킨 배열을 이용하여 자료형, 변수명 등등 특정 상황들을 거른다음			make_tree함수를 이용해 트리화를 시킨다. 트리는 기본적으로 연산자 우선순위		가 높은 연산자가 밑으로 간다.
	- main.c
		- ssu_score 실행과 수행시간을 측정한다


# Linux 설계2
1. 개요
- ssu_mntr 실행 프로그램은 특정 디렉토리를 모니터링하여 파일의 변경상태를 모니터링하는 프로그램과 각종 명령어들을 입력받아 특정 디렉토리에 직접적으로 변경을 가하거나 상태를 보여주는 기능으로 구성되어 있다.
<모니터링의 기능>
- 파일, 디렉토리의 수정, 삭제, 생성을 log.txt에 시간과 파일의 이름과 변경 종류를 작성한다
<프롬프트 기능>
- delete [FILE_NAME] [END_TIME] [OPTION]( i 옵션, r 옵션 )
	- 지정한 시간에 파일을 삭제함
	- i 옵션의 경우 trash디렉토리에 삭제파일과 삭제파일 정보를 추가하지 않고 삭제
	- r 옵션의 경우 지정한 시간에 삭제여부를 다시 물어봄
- recover [FILE_NAME] [OPTION] ( l(엘) 옵션 )
	- trash 디렉토리에 있는 파일을 원래 경로로 복구 시킴
	- l(엘) 옵션의 경우 삭제시간이 가장 오래된 순서로 파일들을 보여줌
- size [FILE_NAME] [OPTION] ( d 옵션 ) [NUMBER]
	- 파일경로, 파일크기를 출력하는 명령어
	- d옵션의 경우 number 단계만큼 하위디렉토리까지 경로와 크기를 출력
- tree
	- 특정 디렉토리의 구조를 그림으로 보여주는 명령어
- exit
	- 프로그램 종료 명령어
- help
	- 사용법 출력 명렁어

# Linux 설계3

1. 개요
< ssu_crond >
    < 기능 >
	- 기본적으로 ssu_crontab_file에 작성된 명령어들을 주기에 따라 실행시켜주는 데몬 프로	그램이다.
	- 로그파일(ssu_crontab_log)에 명령어가 실행된 시각과 run <실행주기> <명령어>를 작성	한다.
	- 이 프로그램은 ssu_crontab_file의 변화에 반응한다.
< ssu_crontab >
< 프롬프트 기능 >
	- ssu_crontab_file에 존재하는 주기적으로 실행될 명령어들의 주기와 명령어를 숫자를 		붙혀 보여줌
	- add <실행주기> <명령어>
		- ssu_crontab_file에 주기적으로 실행할 명령어 등록시킴
		- 로그파일(ssu_crontab_log)에 추가되었다고 로그를 작성한다.
	- remove <COMMAND_NUMBER>
		- 프롬프트로 출력한 ssu_crontab_file의 정보를 숫자를 입력받아 제거함
- 로그파일(ssu_crontab_log)에 명령어가 삭제되었다고 로그를 작성한다.
	- exit
		- 프로그램을 종료함
< ssu_rsync >
실행 : ./ssu_rsync [OPTION : -t -m -r] <src> <dst>
< 기능 >
	- 기본 기능
		- command-line을 통해 입력받은 <src>를 <dst> 디렉토리에 동기화를 시킨다.
		- 기본적으로 src의 서브디렉토리는 동기화하지 않는다.
		- 파일의 이름, 크기, 최종수정일이 같을 경우 동일한 파일이라고 감지한다.
		- <src>에는 디렉토리 및 일반파일 가능, <dst>에는 디렉토리만 가능하다.
		- 동기화 중 SIGINT 발생시 동기화 하지 않은 상태로 유지
		- 로그파일(ssu_rsync_log)파일에 명령어와 동기화한 파일의 이름과 크기를 로그		에 남긴다.
	- r 옵션
		- <src>가 디렉토리일 경우 서브디렉토리도 동기화 시켜준다.
- 로그파일(ssu_rsync_log)파일에 명령어와 동기화한 파일의 이름과 크기를 로그	에 남긴다.
	- t 옵션
		- 동기화가 필요한 파일들을 tar파일로 묶어서 한번에 동기화 시킨다.
		- 로그파일(ssu_rsync_log)에 tar파일의 크기와 동기화된 파일의 이름과 크기를 		작성한다.
	- m 옵션
		- <src>에 존재하지 않는 파일이 <dst>에 존재하면 <dst>에서 삭제 시켜준다.
		- 옵션을 설정하지 않은 경우 존재할 수 있음.
		- 로그파일(ssu_rsync_log)에 삭제된 파일의 정보를 작성한다.


